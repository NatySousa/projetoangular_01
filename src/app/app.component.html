<!-- CONTEUDO EXIBIDO SE O USUARIO ESTIVER AUTENTICADO! -->
<div *ngIf="autenticado" class="container mt-4">

  <div class="row">
    <div class="col-md-3 text-center">
      <img src="https://www.jornalcontabil.com.br/wp-content/uploads/2020/04/empresario-nomeia-um-lider-para-o-chefe-da-equipe-criacao-de-equipes-efetivas-de-especialistas_72572-1300.jpg" class="img-fluid" />

      <div class="mt-3">
        <h5>Sistema de Controle de Empresas e Funcionários</h5>
        <p>Projeto Angular integrado com NET CORE API, Dapper e SqlServer</p>
      </div>

      <div class="mt-3">
        <strong>Usuário autenticado:</strong>
        <br/>
        {{nome}}
        <br/>
        <small>{{email}}</small>
      </div>

      <div class="mt-3">
        <div class="d-grid mb-2">
          <a routerLink="cadastro-empresas" class="btn btn-outline-primary">
            Cadastrar Empresas
          </a>
        </div>
        <div class="d-grid mb-2">
          <a routerLink="consulta-empresas" class="btn btn-outline-primary">
            Consultar Empresas
          </a>
        </div>
        <div class="d-grid mb-2">
          <a routerLink="cadastro-funcionarios" class="btn btn-outline-primary">
            Cadastrar Funcionários
          </a>
        </div>
        <div class="d-grid mb-2">
          <a routerLink="consulta-funcionarios" class="btn btn-outline-primary">
            Consultar Funcionários
          </a>
        </div>
        <div class="d-grid mb-2">
          <a (click)="logout()" class="btn btn-outline-danger">
            Sair do Sistema
          </a>
        </div>
      </div>

    </div>
    <div class="col-md-9" style="padding-left: 30px;">

      <!-- local onde será exibido o conteudo das páginas -->
      <router-outlet></router-outlet>

    </div>
  </div>

</div>

<!-- CONTEUDO EXIBIDO SE O USUARIO NÃO ESTIVER AUTENTICADO! -->
<div *ngIf="!autenticado">
  <div class="row mt-5">
    <div class="col-md-4 offset-md-4">
      <div class="card">
        <div class="card-body text-center">
          <img src="https://www.jornalcontabil.com.br/wp-content/uploads/2020/04/empresario-nomeia-um-lider-para-o-chefe-da-equipe-criacao-de-equipes-efetivas-de-especialistas_72572-1300.jpg" class="img-fluid" />
          <h5>Acesso ao Sistema</h5>
          <hr />

          <div *ngIf="mensagemLogin" class="alert alert-danger">
            <strong>{{mensagemLogin}}</strong>
          </div>

          <form #formLogin="ngForm" (submit)="autenticarUsuario(formLogin)">

            <label>Email de acesso:</label>
            <input type="text" class="form-control" placeholder="Digite aqui"
              name="email" ngModel />
            <br />

            <label>Senha de acesso:</label>
            <input type="password" class="form-control" placeholder="Digite aqui"
              name="senha" ngModel />
            <br />

            <div class="d-grid">
              <input type="submit" value="Acessar Sistema" class="btn btn-dark" />
            </div>

            <div class="d-grid mt-2">
              <input type="button" value="Criar conta de usuário" data-bs-toggle="modal"
                data-bs-target="#janelacadastro" class="btn btn-secondary" />
            </div>

          </form>

        </div>
      </div>
    </div>
  </div>

  <!-- Janela para cadastro de usuario -->
  <div id="janelacadastro" class="modal fade">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Criar Conta de Usuário</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">

          <div *ngIf="mensagemCadastro" class="alert alert-secondary">
            <strong>{{mensagemCadastro}}</strong>
          </div>

          <form #formCadastro="ngForm" (submit)="cadastrarUsuario(formCadastro)">

            <label>Nome do Usuário:</label>
            <input type="text" class="form-control"
              name="nome" ngModel/>
            <br />

            <label>Email do Usuário:</label>
            <input type="text" class="form-control"
              name="email" ngModel/>
            <br />

            <label>Senha:</label>
            <input type="password" class="form-control"
              name="senha" ngModel/>
            <br />

            <label>Confirme a Senha:</label>
            <input type="password" class="form-control"
              name="senhaConfirmacao" ngModel/>
            <br />

            <div class="text-end">
              <input type="submit" value="Realizar Cadastro" class="btn btn-dark" />
            </div>

          </form>

        </div>
      </div>
    </div>
  </div>

</div>

